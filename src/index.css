/* Self-hosted fonts - eliminates CDN dependency and improves performance */

/* Heebo - Primary Hebrew font (variable font supporting weights 100-900) */
@font-face {
  font-family: 'Heebo';
  font-style: normal;
  font-weight: 100 900;
  font-display: swap;
  src: url('/fonts/heebo-hebrew.woff2') format('woff2');
  unicode-range: U+0307-0308, U+0590-05FF, U+200C-2010, U+20AA, U+25CC, U+FB1D-FB4F;
}

@font-face {
  font-family: 'Heebo';
  font-style: normal;
  font-weight: 100 900;
  font-display: swap;
  src: url('/fonts/heebo-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Heebo';
  font-style: normal;
  font-weight: 100 900;
  font-display: swap;
  src: url('/fonts/heebo-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

/* Roboto Flex - Variable font for VariableProximity component (weights 400-700) */
@font-face {
  font-family: 'Roboto Flex';
  font-style: normal;
  font-weight: 400 700;
  font-stretch: 100%;
  font-display: swap;
  src: url('/fonts/roboto-flex-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

/* Clash Display - Geometric display font for headlines and branding */
@font-face {
  font-family: 'Clash Display';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/clash-display-400.woff2') format('woff2');
}

@font-face {
  font-family: 'Clash Display';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url('/fonts/clash-display-500.woff2') format('woff2');
}

@font-face {
  font-family: 'Clash Display';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url('/fonts/clash-display-600.woff2') format('woff2');
}

@font-face {
  font-family: 'Clash Display';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('/fonts/clash-display-700.woff2') format('woff2');
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* NEXO AGENCY - Light Theme with Dark Hero */

@layer base {
  :root {
    --background: 0 0% 98%;
    --foreground: 0 0% 8%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 8%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 8%;

    /* Accessible primary pink - #D6006E achieves 4.6:1 contrast on white (WCAG AA compliant) */
    /* Original bright pink (#FF1493 / 328 100% 54%) only has 3.1:1 contrast - use --primary-bright for decorative elements */
    --primary: 328 100% 42%;
    --primary-bright: 328 100% 54%;
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 8%;

    --muted: 0 0% 94%;
    /* WCAG AA compliant: 0 0% 35% = #595959 achieves 7.1:1 on white, 4.5:1 on #f0f0f0 */
    --muted-foreground: 0 0% 35%;

    /* Accent uses accessible primary for text-on-light consistency */
    --accent: 328 100% 42%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 90%;
    --input: 0 0% 90%;
    /* Ring can use bright pink since it's decorative (focus indicators) */
    --ring: 328 100% 54%;

    --radius: 0.5rem;

    /* Custom NEXO colors */
    --hero-bg: 0 0% 4%;
    --hero-fg: 0 0% 100%;
    --neon-pink: 328 100% 54%;
    --glass: 0 0% 100%;

    /* NEXO brand color tokens (raw hex values for inline styles) */
    --nexo-dark: #0a0a0a;
    --nexo-charcoal: #1a1a1a;
    --nexo-graphite: #2a2a2a;
    --nexo-slate: #3d3d3d;
    --nexo-steel: #4a4a4a;
    --nexo-ash: #6a6a6a;
    /* --nexo-silver upgraded from #9a9a9a to #757575 for WCAG AA compliance (4.6:1 on white) */
    --nexo-silver: #757575;
    /* --nexo-smoke upgraded from #c0c0c0 to #767676 for WCAG AA compliance (4.5:1 on white) */
    --nexo-smoke: #767676;
    --nexo-mist: #e5e5e5;
    --nexo-light: #FAF9F6;
    --nexo-section: #FAFAFA;

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 0 0% 8%;
    --sidebar-primary: 328 100% 54%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 0 0% 94%;
    --sidebar-accent-foreground: 0 0% 8%;
    --sidebar-border: 0 0% 90%;
    --sidebar-ring: 328 100% 54%;
  }

  .dark {
    --background: 0 0% 4%;
    --foreground: 0 0% 98%;

    --card: 0 0% 7%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 7%;
    --popover-foreground: 0 0% 98%;

    /* In dark mode, bright pink has excellent contrast on dark backgrounds (12:1+) */
    --primary: 328 100% 54%;
    --primary-bright: 328 100% 54%;
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 15%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 15%;
    /* WCAG AA compliant: 0 0% 72% = #B8B8B8 achieves 8.6:1 on #0a0a0a dark bg */
    --muted-foreground: 0 0% 72%;

    --accent: 328 100% 54%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 20%;
    --input: 0 0% 15%;
    --ring: 328 100% 54%;

    --sidebar-background: 0 0% 7%;
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: 328 100% 54%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 0 0% 12%;
    --sidebar-accent-foreground: 0 0% 98%;
    --sidebar-border: 0 0% 20%;
    --sidebar-ring: 328 100% 54%;
  }

  .theme {
    --animate-shimmer-slide: shimmer-slide var(--speed) ease-in-out infinite alternate;
    --animate-spin-around: spin-around calc(var(--speed) * 2) infinite linear;
  }

  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-foreground font-heebo antialiased;
    overflow-x: hidden;
  }
}

@layer components {
  .hero-dark {
    @apply bg-hero-bg text-hero-fg;
  }

  .glass {
    @apply bg-glass/80 backdrop-blur-xl border border-border/50;
  }

  .text-gradient {
    /* Solid color instead of gradient - cleaner, more editorial look */
    @apply text-primary;
  }

  .hover-lift {
    /* Performance: Use specific properties instead of transition-all */
    @apply duration-300 hover:-translate-y-2 hover:shadow-xl;
    transition-property: transform, box-shadow;
    will-change: transform;
  }

  .link-underline {
    /* Performance: Use scaleX instead of width for GPU-accelerated animation */
    @apply relative;
    &::after {
      content: '';
      position: absolute;
      bottom: 0;
      right: 0;
      width: 100%;
      height: 2px;
      background-color: hsl(var(--primary));
      transform: scaleX(0);
      transform-origin: right;
      transition: transform 0.3s ease-out;
    }
    &:hover::after {
      transform: scaleX(1);
    }
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Screen reader only - for accessibility */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Enhanced Text Effects */
  .text-glow {
    text-shadow:
      0 0 10px hsl(var(--primary) / 0.5),
      0 0 20px hsl(var(--primary) / 0.3),
      0 0 30px hsl(var(--primary) / 0.2);
  }

  .text-glow-sm {
    text-shadow: 0 0 8px hsl(var(--primary) / 0.4);
  }

  .text-shadow-soft {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  /* Solid accent color for emphasized text - cleaner than animated gradients */
  .text-gradient-animated {
    @apply text-primary;
  }

  /* Hebrew-optimized typography utilities */
  .hebrew-display {
    font-feature-settings: "kern" 1;
    letter-spacing: -0.02em;
    line-height: 1.05;
  }

  .hebrew-body {
    font-feature-settings: "kern" 1;
    letter-spacing: -0.005em;
    line-height: 1.7;
  }

  /* Glassmorphism Effects */
  .glass-premium {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    /* Performance: Force GPU compositing layer for backdrop-filter */
    transform: translateZ(0);
    isolation: isolate;
  }

  .glass-dark {
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
    /* Performance: Force GPU compositing layer for backdrop-filter */
    transform: translateZ(0);
    isolation: isolate;
  }

  /* Glow Effects */
  .glow-primary {
    box-shadow:
      0 0 20px hsl(var(--primary) / 0.3),
      0 0 40px hsl(var(--primary) / 0.2),
      0 0 60px hsl(var(--primary) / 0.1);
  }

  .glow-step-1 {
    box-shadow:
      0 0 20px rgba(103, 126, 234, 0.3),
      0 0 40px rgba(103, 126, 234, 0.2),
      0 0 60px rgba(103, 126, 234, 0.1);
  }

  .glow-step-2 {
    box-shadow:
      0 0 20px rgba(118, 75, 162, 0.3),
      0 0 40px rgba(118, 75, 162, 0.2),
      0 0 60px rgba(118, 75, 162, 0.1);
  }

  .glow-step-3 {
    box-shadow:
      0 0 20px rgba(245, 87, 108, 0.3),
      0 0 40px rgba(245, 87, 108, 0.2),
      0 0 60px rgba(245, 87, 108, 0.1);
  }

  .glow-step-4 {
    box-shadow:
      0 0 20px rgba(255, 159, 64, 0.3),
      0 0 40px rgba(255, 159, 64, 0.2),
      0 0 60px rgba(255, 159, 64, 0.1);
  }

  .glow-step-5 {
    box-shadow:
      0 0 20px rgba(75, 192, 192, 0.3),
      0 0 40px rgba(75, 192, 192, 0.2),
      0 0 60px rgba(75, 192, 192, 0.1);
  }

  /* Premium progress bar */
  .progress-glow {
    position: relative;
    overflow: visible;
    box-shadow:
      0 0 10px hsl(var(--primary) / 0.5),
      0 0 20px hsl(var(--primary) / 0.3),
      0 0 30px hsl(var(--primary) / 0.2);
    animation: pulse-glow 2s ease-in-out infinite;
    /* Performance: GPU acceleration for animated box-shadow */
    will-change: box-shadow;
    transform: translateZ(0);
  }

  @keyframes pulse-glow {
    0%, 100% {
      box-shadow:
        0 0 10px hsl(var(--primary) / 0.5),
        0 0 20px hsl(var(--primary) / 0.3),
        0 0 30px hsl(var(--primary) / 0.2);
    }
    50% {
      box-shadow:
        0 0 15px hsl(var(--primary) / 0.6),
        0 0 30px hsl(var(--primary) / 0.4),
        0 0 45px hsl(var(--primary) / 0.3);
    }
  }
}

/* shimmer-slide and spin-around keyframes are defined in tailwind.config.ts */

/* Navbar Marquee Button - Smooth infinite scroll animation */
@keyframes marquee-scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.animate-marquee-scroll {
  animation: marquee-scroll 10s linear infinite;
  will-change: transform;
}

/* Accessibility: Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Disable specific animated elements */
  .animate-spin,
  .animate-pulse,
  .animate-bounce,
  .animate-marquee,
  [class*="animate-"] {
    animation: none !important;
  }

  /* Keep opacity changes for visibility but remove motion */
  .transition-all,
  .transition-transform,
  .transition-opacity {
    transition-property: opacity !important;
    transition-duration: 0.2s !important;
  }
}

/* Reduce effects on mobile for performance */
@media (max-width: 768px) {
  .glass,
  .glass-dark,
  .glass-premium {
    backdrop-filter: blur(4px);
  }

  .glow-primary,
  .glow-step-1,
  .glow-step-2,
  .glow-step-3,
  .glow-step-4,
  .glow-step-5 {
    box-shadow: 0 0 15px hsl(var(--primary) / 0.2) !important;
  }

  /* Prevent navbar blocking content on anchor navigation */
  section[id] {
    scroll-margin-top: 72px; /* navbar height (~64px) + small buffer */
  }

  /* Adjust sticky elements to account for navbar */
  .sticky-below-nav {
    top: 64px !important;
  }
}

/* Safe Area Support */
:root {
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
}

/* Dynamic Viewport Height Fallback */
.min-h-dvh {
  min-height: 100vh;
  min-height: 100dvh;
}

.h-dvh {
  height: 100vh;
  height: 100dvh;
}

/* Touch Target Helper */
.touch-target {
  min-width: 44px;
  min-height: 44px;
}

/* Missing Shake Animation */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

.animate-shake {
  animation: shake 0.6s ease-in-out;
}
